import { useEffect, useState } from "react";import { StatCard } from "../../components/dashboard/StatCard";import { PopularScholarships } from "../../components/dashboard/PopularScholarships";import { buscar } from "../../services/Service";import { Users, GraduationCap, Link, UserX } from "lucide-react";import type Bolsa from "../../models/Bolsa";import type Estudante from "../../models/Estudantes";import { ToastAlerta } from "../../utils/ToastAlerta";import { DashboardBanner } from "../../components/dashboard/DashboardBanner";export function Home() {  const [bolsas, setBolsas] = useState<Bolsa[]>([]);  const [estudantes, setEstudantes] = useState<Estudante[]>([]);  const [isLoading, setIsLoading] = useState<boolean>(true);  useEffect(() => {    async function fetchData() {      setIsLoading(true);      try {        await buscar("/bolsa", setBolsas, {});        await buscar("/estudante", setEstudantes, {});      } catch (error) {        ToastAlerta("Erro ao buscar dados do dashboard", "erro");      } finally {        setIsLoading(false);      }    }    fetchData();  }, []);  const totalBolsas = bolsas.length;  const bolsasAtivas = bolsas.filter(b => b.ativa).length;  const alunosComBolsa = estudantes.filter(e =>    e.bolsa != null && bolsas.some(b => b.id === e.bolsa?.id)  ).length;  const alunosInativos = estudantes.filter(e => !e.ativo).length;  const bolsasComContagem = bolsas.map(b => ({    ...b,    students: estudantes.filter(e => e.bolsa?.id === b.id).length,  }));  return (    <main className="p-6 bg-gray-50 min-h-screen space-y-8" role="main">      <section>        <h1 className="text-2xl font-semibold text-gray-800">          Dashboard Geral        </h1>      </section>      <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">        <StatCard          title="Total de Estudantes"          value={isLoading ? "..." : estudantes.length}          subtitle="Todos os alunos cadastrados"          icon={<Users size={20} />}          iconBg="bg-blue-500"        />        <StatCard          title="Bolsas Ativas"          value={isLoading ? "..." : bolsasAtivas}          subtitle={`De um total de ${totalBolsas}`}          icon={<GraduationCap size={20} />}          iconBg="bg-green-500"        />        <StatCard          title="Alunos com Bolsa"          value={isLoading ? "..." : alunosComBolsa}          subtitle={isLoading            ? ""            : `${Math.round((alunosComBolsa / estudantes.length) * 100)}% da base de alunos`}          icon={<Link size={20} />}          iconBg="bg-purple-500"        />        <StatCard          title="Inativos"          value={isLoading ? "..." : alunosInativos}          subtitle="Sem vÃ­nculo ativo"          icon={<UserX size={20} />}          iconBg="bg-orange-500"        />      </div>      <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">        <DashboardBanner />        <PopularScholarships bolsas={bolsasComContagem} />      </div>    </main>  );}